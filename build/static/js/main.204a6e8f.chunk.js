(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var a,r=n(0),u=n.n(r),o=n(15),l=n.n(o),c=n(1),s=n.n(c),i=n(3),m=n(2),p=n(5),d=n.n(p),f=function(){return d.a.get("/api/blogs").then((function(e){return e.data}))},b=function(e){a="bearer ".concat(e)},v=function(e){var t={headers:{Authorization:a}};return d.a.post("/api/blogs",e,t).then((function(e){return e.data}))},g=function(e,t,n){return{title:e,author:t,url:n}},h=function(e){return d.a.put("/api/blogs".concat("/".concat(e.id)),e).then((function(e){return e.data}))},E=function(e){var t={headers:{Authorization:a}};return d.a.delete("/api/blogs".concat("/".concat(e.id)),t).then((function(e){return e.data}))},w=function(e){var t=e.blog,n=e.updateBlogs,a=e.notification,o=Object(r.useState)(!1),l=Object(m.a)(o,2),c=l[0],p=l[1],d=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.likes=t.likes+1,e.next=3,h(t);case 3:p(!1),p(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Are you sure you want to remove ".concat(t.title,"?"))){e.next=6;break}return e.next=4,E(t);case 4:n(),a(["Message","Blog successfully deleted"],3e3);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(["Error","Only the blogs creator may delete it"],3e3);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),b={display:c?"":"none"};return u.a.createElement("div",{style:{borderStyle:"groove",paddingTop:10,paddingLeft:2,marginBottom:5}},u.a.createElement("p",null,"Title: ",t.title),u.a.createElement("p",null,"Author: ",t.author),u.a.createElement("button",{onClick:function(){return p(!c)}},c?"Hide info":"Show info"),u.a.createElement("div",{style:b},u.a.createElement("p",null,"Likes: ",t.likes),u.a.createElement("button",{onClick:d},"like"),u.a.createElement("p",null,"Url: ",t.url),u.a.createElement("button",{onClick:f},"Delete blog?")))},y=function(e){return u.a.createElement("div",null,u.a.createElement("h1",null,"Add a new Blog"),u.a.createElement("form",null,u.a.createElement("div",null,u.a.createElement("div",null,"title:",u.a.createElement("input",{type:"text",name:"title",value:e.titleState,onChange:function(t){var n=t.target;return e.setTitle(n.value)}})),u.a.createElement("div",null,"author:",u.a.createElement("input",{type:"text",name:"author",value:e.authorState,onChange:function(t){var n=t.target;return e.setAuthor(n.value)}})),u.a.createElement("div",null,"url:",u.a.createElement("input",{type:"text",name:"url",value:e.urlState,onChange:function(t){var n=t.target;return e.setUrl(n.value)}})),u.a.createElement("button",{type:"submit",onClick:e.onSubmit},"create"))))},O=function(e){return u.a.createElement("form",null,u.a.createElement("div",null,u.a.createElement("h2",null,"login"),"username",u.a.createElement("div",null,u.a.createElement("input",{type:"text",value:e.usernameState,name:"username",onChange:function(t){var n=t.target;return e.usernameFunction(n.value)}})),"password",u.a.createElement("div",null,u.a.createElement("input",{type:"password",value:e.passwordState,name:"password",onChange:function(t){var n=t.target;return e.passwordFunction(n.value)}})),u.a.createElement("button",{type:"submit",onClick:e.onSubmit},"login")))},j=n(16),k={color:"green",background:"lightgrey",fontSize:16,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},S=function(e){var t=e.message[1],n=e.message[0];if(null===t)return null;if("string"===typeof t){var a=Object(j.a)({},k,{color:"red"});console.log(t);var r="Error"===n?a:k;return u.a.createElement("div",{style:r},u.a.createElement("h1",null,t))}},x=["Hello, and welcome! :) \n","This small web app was set up to demonstrate password hashing, user token authentication, and basic server requests. \n","Use credentials User1, password: 111 to log in and get started - your browser will remember your session if you reload the page. \n","Alternatively, use the create new user button to store your own credentials. \nBlogs can only be deleted by the user that created them. \nBlogs are listed in order of number of likes \n"],C=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],o=n[1],l={display:a?"none":""},c={display:a?"":"none"},s=function(){o(!a)};return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:l},"login"===e.buttonLabel?x:null,u.a.createElement("div",null,u.a.createElement("button",{onClick:s},e.buttonLabel))),u.a.createElement("div",{style:c},e.children,u.a.createElement("button",{onClick:s},"cancel")))},U={newUser:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(e){var t=e.notification,n=Object(r.useState)(""),a=Object(m.a)(n,2),o=a[0],l=a[1],c=Object(r.useState)(""),p=Object(m.a)(c,2),d=p[0],f=p[1],b=Object(r.useState)(""),v=Object(m.a)(b,2),g=v[0],h=v[1],E=function(){var e=Object(i.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a={username:o,name:d,password:g},e.next=5,U.newUser(a);case 5:t(["Message","".concat(o," account created")],3e3),l(""),f(""),h(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(["Error","unable to create account"],3e3);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("div",null,u.a.createElement("p",null,"WARNING - this web app is intended for demonstration purposes only"),u.a.createElement("p",null,"Although passwords are hashed and not stored in plain text, it is STRONGLY advised not to enter any username/password that you use on any other site "),u.a.createElement("p",null,"username and password must both be at least 3 characters long for heightened security (lol) and username must be unique"),u.a.createElement("form",null,u.a.createElement("div",null,"Username:",u.a.createElement("input",{type:"text",name:"username",value:o,onChange:function(e){var t=e.target;return l(t.value)}})),u.a.createElement("div",null,"Name:",u.a.createElement("input",{type:"text",name:"name",value:d,onChange:function(e){var t=e.target;return f(t.value)}})),u.a.createElement("div",null,"Password:",u.a.createElement("input",{type:"password",name:"password",value:g,onChange:function(e){var t=e.target;return h(t.value)}})),u.a.createElement("button",{type:"submit",onClick:E},"create account")))},A={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),l=Object(m.a)(o,2),c=l[0],p=l[1],d=Object(r.useState)(""),h=Object(m.a)(d,2),E=h[0],j=h[1],k=Object(r.useState)(""),x=Object(m.a)(k,2),U=x[0],B=x[1],F=Object(r.useState)(""),N=Object(m.a)(F,2),T=N[0],M=N[1],D=Object(r.useState)(""),I=Object(m.a)(D,2),J=I[0],z=I[1],G=Object(r.useState)(null),R=Object(m.a)(G,2),V=R[0],q=R[1],H=Object(r.useState)([null,null]),W=Object(m.a)(H,2),P=W[0],Y=W[1],K=Object(r.useState)(!1),Q=Object(m.a)(K,2),X=Q[0],Z=Q[1],$=Object(r.useState)(!1),_=Object(m.a)($,2),ee=_[0],te=_[1],ne=function(e,t){Y(e),setTimeout((function(){Y([null,null])}),t)},ae=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:(t=e.sent).sort((function(e,t){return t.likes-e.likes})),a(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("loggedUser"));e&&(q(e),b(e.token),ne(["Message","Welcome back ".concat(e.name)],3e3))}),[]),Object(r.useEffect)((function(){ae()}),[]);var re=function(){M(""),z("")},ue=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,A.login({username:T,password:J});case 4:n=e.sent,q(n),b(n.token),window.localStorage.setItem("loggedUser",JSON.stringify(n)),re(),ne(["Message","".concat(n.username," logged in successfully")],2500),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),re(),ne(["Error","Error: Login failed - please try again"],2500);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),q(null),window.localStorage.removeItem("loggedUser"),b(""),ne(["Message","User has logged out"],3e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){p(""),j(""),B("")},ce=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(c,E,U),e.next=3,v(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ce();case 4:return n=e.sent,ne(["Message","New blog, ".concat(n.title,", has been saved")],2500),e.next=8,f();case 8:r=e.sent,a(r),le(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),ne(["Error",e.t0],3e3),le();case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("div",{style:{background:"lightGrey"}},u.a.createElement(S,{message:P}),null===V?u.a.createElement(u.a.Fragment,null,u.a.createElement(C,{buttonLabel:"login"},u.a.createElement(O,{loginVisible:X,setLoginVisible:Z,usernameState:T,passwordState:J,usernameFunction:M,passwordFunction:z,onSubmit:ue})),u.a.createElement(C,{buttonLabel:"new user"},u.a.createElement(L,{notification:ne}))):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(C,{buttonLabel:"create blog"},u.a.createElement(y,{visible:ee,setVisible:te,titleState:c,authorState:E,urlState:U,setTitle:p,setAuthor:j,setUrl:B,onSubmit:se}))),u.a.createElement("div",null,u.a.createElement(u.a.Fragment,null,"".concat(JSON.stringify(V.name)," is logged in"),u.a.createElement("button",{type:"submit",onClick:oe},"Logout")),u.a.createElement("h2",null,"blogs"),n.map((function(e){return u.a.createElement(w,{key:e.id,blog:e,updateBlogs:ae,notification:ne})})))))};l.a.render(u.a.createElement(B,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.204a6e8f.chunk.js.map